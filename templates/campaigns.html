{% extends "nav.html" %}
{% block buttons %}
<link href="../static/vendor/simple-datatables/tables.css" rel="stylesheet">
<link href="https://unpkg.com/tabulator-tables@5.0.7/dist/css/tabulator.min.css" rel="stylesheet">
 <script type="text/javascript" src="https://unpkg.com/tabulator-tables@5.0.7/dist/js/tabulator.min.js"></script>

<div class="pagetitle">
  <h1>{{ title }}</h1>

  <div class="btn-group btn-group-sm" role="group" aria-label="Basic example">
    <a type="button" class="btn btn-secondary" role="button" href="/newcampaign">New campaign</a>
    <a type="button" class="btn btn-secondary" role="button">Middle</a>
    <a type="button" class="btn btn-secondary"role="button">Right</a>
  </div>
</div>  
  {% endblock %}
{% block content %}
<div class="container">
  <div class="row">
    <div class="table-responsive">
      <!-- <table id="data" class="table table-striped table-hover table-responsive-xl " style="width:100%">
        <thead>
          <tr>
            <th scope="col">unique_click_id</th>
            <th scope="col">click_camp_name</th>
            <th scope="col">click_lander</th>
            <th scope="col">click_offer</th>
            <th scope="col">lander_clicked</th>
            <th scope="col">lander_clicked_at</th>
            <th scope="col">offer_clicked</th>
            <th scope="col">offer_clicked_at</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table> -->



      <div>
        <button id="ajax-trigger">Load Data via AJAX</button>
    </div>
    
    <div id="example-table"></div>
      <script> 
      var tabledata =  [{'unique_click_id': 'LKO5QIJ8AMYDKBNU35MQZCQPGGK0JG99', 'click_camp_name': '1M65XXD2I3ZWR240CKJPRL3GARR433W5', 'click_lander': 'http://127.0.0.1:5000/dummylander', 'click_offer': 'http://127.0.0.1:5000/dummyoffer?sub1=', 'lander_clicked': 1, 'lander_clicked_at': 1, 'offer_clicked': 1, 'offer_clicked_at': 1}]
      var table = new Tabulator("#example-table", {
        height:"311px",
    layout:"fitColumns",
        placeholder:tabledata,
    autoColumns:true,

});

//trigger AJAX load on "Load Data via AJAX" button click
document.getElementById("ajax-trigger").addEventListener("click", function(){
    table.setData("/api/campaigns");
});
      </script>
      
      
      
        
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
  <!-- <script>
    $(document).ready(function () {
      $('#data').DataTable(
        {
        ajax: '/api/data',
        "autoWidth": false,
        columnDefs: [
    { "width": "20px", "targets": 0 },
    { "width": "20%", "targets": 0 },
    { "width": "20%", "targets": 0 },
    { "width": "20%", "targets": 0 },
    { "width": "20%", "targets": 0 },
    { "width": "20%", "targets": 0 },
    { "width": "20%", "targets": 0 },
    { "width": "20%", "targets": 0 },
    { "width": "20%", "targets": 0 },
  ],
        columns: [
          {data: 'unique_click_id'},
          {data: 'click_camp_name', searchable: false},
          {data: 'click_lander', orderable: false, searchable: false},
          {data: 'click_offer', orderable: false, searchable: false},
          {data: 'lander_clicked', orderable: false, searchable: false},
          {data: 'lander_clicked_at', orderable: false, searchable: false},
          {data: 'offer_clicked', orderable: false, searchable: false},
          {data: 'offer_clicked_at', orderable: false, searchable: false},
        ],
      }
      );
    });
    
  </script> -->
{% endblock %}
